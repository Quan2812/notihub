<div class="container">
  <div class="container-header">
    <div class="heading-left">
      <div class="wrapper">
        <h4>Xem chi tiết template</h4>
      </div>
      <div class="button-group">
        <a class="action-button" (click)="goToUpdate()">

          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M11.25 17.0625H6.75C2.6775 17.0625 0.9375 15.3225 0.9375 11.25V6.75C0.9375 2.6775 2.6775 0.9375 6.75 0.9375H8.25C8.5575 0.9375 8.8125 1.1925 8.8125 1.5C8.8125 1.8075 8.5575 2.0625 8.25 2.0625H6.75C3.2925 2.0625 2.0625 3.2925 2.0625 6.75V11.25C2.0625 14.7075 3.2925 15.9375 6.75 15.9375H11.25C14.7075 15.9375 15.9375 14.7075 15.9375 11.25V9.75C15.9375 9.4425 16.1925 9.1875 16.5 9.1875C16.8075 9.1875 17.0625 9.4425 17.0625 9.75V11.25C17.0625 15.3225 15.3225 17.0625 11.25 17.0625Z"
              fill="white" />
            <path
              d="M6.375 13.2675C5.9175 13.2675 5.4975 13.1025 5.19 12.8025C4.8225 12.435 4.665 11.9025 4.7475 11.34L5.07 9.08254C5.13 8.64754 5.415 8.08504 5.7225 7.77754L11.6325 1.86754C13.125 0.375044 14.64 0.375044 16.1325 1.86754C16.95 2.68504 17.3175 3.51754 17.2425 4.35004C17.175 5.02504 16.815 5.68504 16.1325 6.36004L10.2225 12.27C9.915 12.5775 9.3525 12.8625 8.9175 12.9225L6.66 13.245C6.5625 13.2675 6.465 13.2675 6.375 13.2675ZM12.4275 2.66254L6.5175 8.57254C6.375 8.71504 6.21 9.04504 6.18 9.24004L5.8575 11.4975C5.8275 11.715 5.8725 11.895 5.985 12.0075C6.0975 12.12 6.2775 12.165 6.495 12.135L8.7525 11.8125C8.9475 11.7825 9.285 11.6175 9.42 11.475L15.33 5.56504C15.8175 5.07754 16.0725 4.64254 16.11 4.23754C16.155 3.75004 15.9 3.23254 15.33 2.65504C14.13 1.45504 13.305 1.79254 12.4275 2.66254Z"
              fill="white" />
            <path
              d="M14.8874 7.37246C14.8349 7.37246 14.7824 7.36496 14.7374 7.34996C12.7649 6.79496 11.1974 5.22746 10.6424 3.25496C10.5599 2.95496 10.7324 2.64746 11.0324 2.55746C11.3324 2.47496 11.6399 2.64746 11.7224 2.94746C12.1724 4.54496 13.4399 5.81246 15.0374 6.26246C15.3374 6.34496 15.5099 6.65996 15.4274 6.95996C15.3599 7.21496 15.1349 7.37246 14.8874 7.37246Z"
              fill="white" />
          </svg>

        </a>
        <a class="action-button">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M7.69373 3.13436C7.46491 3.45216 7.38333 3.84984 7.38333 4.10689H6.84022H6.29712C6.29712 3.67602 6.42191 3.0418 6.81223 2.49969C7.22249 1.92988 7.90149 1.5 8.90401 1.5H11.4747L15.6385 5.66383V5.88879V11.0224C15.6385 11.4533 15.5137 12.0875 15.1234 12.6296C14.7131 13.1994 14.0341 13.6293 13.0316 13.6293H8.90401C8.47314 13.6293 7.83892 13.5045 7.29681 13.1142C6.727 12.7039 6.29712 12.0249 6.29712 11.0224V4.10689H6.84022H7.38333V11.0224C7.38333 11.6709 7.64137 12.0238 7.93148 12.2327C8.24928 12.4615 8.64696 12.5431 8.90401 12.5431H13.0316C13.6801 12.5431 14.033 12.285 14.2419 11.9949C14.4707 11.6771 14.5523 11.2795 14.5523 11.0224V6.11375L11.0247 2.58621H8.90401C8.25551 2.58621 7.90261 2.84425 7.69373 3.13436Z"
                  fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M3.29042 5.8386C3.85516 5.43198 4.51654 5.30176 4.96551 5.30176H6.05172C6.35167 5.30176 6.59482 5.54491 6.59482 5.84486C6.59482 6.14481 6.35167 6.38796 6.05172 6.38796H4.96551C4.69036 6.38796 4.26553 6.47498 3.92509 6.72009C3.61236 6.94526 3.33621 7.32532 3.33621 8.01727V14.5345C3.33621 14.8097 3.42322 15.2345 3.66833 15.5749C3.8935 15.8877 4.27356 16.1638 4.96551 16.1638H8.5862C8.86136 16.1638 9.28619 16.0768 9.62662 15.8317C9.93936 15.6065 10.2155 15.2265 10.2155 14.5345V13.5487L11.3017 13.5484V14.5345C11.3017 15.5805 10.8537 16.2866 10.2613 16.7132C9.69656 17.1198 9.03518 17.25 8.5862 17.25H4.96551C3.91954 17.25 3.21339 16.802 2.78684 16.2096C2.38023 15.6449 2.25 14.9835 2.25 14.5345V8.01727C2.25 6.9713 2.69799 6.26515 3.29042 5.8386Z"
                  fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M10.7065 2.04309H11.7927V5.34567H15.0953V6.43188H10.7065V2.04309Z" fill="white" />
          </svg>

        </a>
        <a class="action-button delete">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M1.5 3.94415C1.5 3.62773 1.75688 3.37122 2.07375 3.37122H15.9487C16.2656 3.37122 16.5225 3.62773 16.5225 3.94415C16.5225 4.26057 16.2656 4.51708 15.9487 4.51708H2.07375C1.75688 4.51708 1.5 4.26057 1.5 3.94415Z"
                  fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M7.86437 2.50024C7.61218 2.85001 7.5225 3.28694 7.5225 3.56972C7.5225 3.88614 7.26562 4.14265 6.94875 4.14265C6.63188 4.14265 6.375 3.88614 6.375 3.56972C6.375 3.10357 6.51032 2.41711 6.93313 1.83071C7.377 1.2151 8.11175 0.75 9.19875 0.75C10.2857 0.75 11.0205 1.2151 11.4644 1.83071C11.8872 2.41711 12.0225 3.10357 12.0225 3.56972C12.0225 3.88614 11.7656 4.14265 11.4488 4.14265C11.1319 4.14265 10.875 3.88614 10.875 3.56972C10.875 3.28694 10.7853 2.85001 10.5331 2.50024C10.302 2.17969 9.91175 1.89586 9.19875 1.89586C8.48575 1.89586 8.0955 2.17969 7.86437 2.50024Z"
                  fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M3.75002 14.0776L3.00146 3.9865L4.14583 3.90186L4.8974 14.0335V14.0547C4.8974 14.2751 4.96832 14.6184 5.16427 14.8902C5.33914 15.1327 5.63564 15.3541 6.19865 15.3541H12.1986C12.4193 15.3541 12.7631 15.2833 13.0353 15.0876C13.2782 14.913 13.4999 14.6169 13.4999 14.0547C13.4999 13.2904 13.5945 10.9329 13.6879 8.69476C13.7041 8.30592 13.7203 7.92093 13.736 7.54813C13.8114 5.75322 13.8749 4.24109 13.8749 3.94418H15.0224C15.0224 4.26771 14.9572 5.81746 14.8819 7.6097C14.8663 7.97983 14.8503 8.36031 14.8344 8.74246C14.7403 10.9979 14.6474 13.3212 14.6474 14.0547C14.6474 14.9904 14.2441 15.6305 13.7058 16.0175C13.1967 16.3836 12.603 16.5 12.1986 16.5H6.19865C5.26165 16.5 4.62065 16.0973 4.23303 15.5597C3.87333 15.0608 3.75435 14.4806 3.75002 14.0776Z"
                  fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M7.69875 7.86487C8.01562 7.86487 8.2725 8.12138 8.2725 8.4378V13.3058C8.2725 13.6223 8.01562 13.8788 7.69875 13.8788C7.38188 13.8788 7.125 13.6223 7.125 13.3058V8.4378C7.125 8.12138 7.38188 7.86487 7.69875 7.86487Z"
                  fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M10.6988 7.86487C11.0156 7.86487 11.2725 8.12138 11.2725 8.4378V13.3058C11.2725 13.6223 11.0156 13.8788 10.6988 13.8788C10.3819 13.8788 10.125 13.6223 10.125 13.3058V8.4378C10.125 8.12138 10.3819 7.86487 10.6988 7.86487Z"
                  fill="white" />
          </svg>

        </a>
      </div>
    </div>
    <div class="template-name">
      <span>T220820250001 - KHUYẾN MÃI THẺ TÍN DỤNG</span>
    </div>

  </div>

  <div class="container-body">
    <div class="paragraph">
      <div class="row">
        <div class="title-col">
          <label>Tên template</label>
        </div>
        <div class="info-col">
          <span>KHUYẾN MÃI THẺ TÍN DỤNG</span>
        </div>
      </div>
      <div class="row">
        <div class="title-col">
          <label>Loại template</label>
        </div>
        <div class="info-col">
          <span>Tùy chỉnh</span>
        </div>
      </div>
      <div class="row">
        <div class="title-col">
          <label>Loại thông báo</label>
        </div>
        <div class="info-col">
          <span>Nhắc nhở</span>
        </div>
      </div>
      <div class="row">
        <div class="title-col">
          <label>Loại nghiệp vụ</label>
        </div>
        <div class="info-col">
          <span>Thẻ tín dụng</span>
        </div>
      </div>
      <div class="row">
        <div class="title-col">
          <label>Kênh gửi tin</label>
        </div>
        <div class="info-col flex-col">
          <span class="col-item">App</span>
          <span class="col-item">SMS</span>
        </div>
      </div>
    </div>
    <div class="collapse-item">
      <div class="collapse-item-header" onclick="toggleCollapse(this)">
        <label>Nội dung thông báo - App</label>
        <div class="collapse-icon">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
          </svg>
        </div>
      </div>
      <div class="collapse-item-body">
        <div class="input-group-row">
          <div class="input-group">
            <label> Ứng dụng gửi tin</label>
            <input value="Information" />
          </div>
          <div class="input-group">
            <label> Tab hiển thị thông báo</label>
            <input value="Information" />
          </div>
        </div>

        <div class="input-group">
          <label>Tiêu đề</label>
          <input
            value="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed eget sem ut elit euismod dignissim et nec lacus. Cras volutpat nibh" />
          <p class="counter">0/100 kí tự</p>
        </div>

        <div class="thumbnail-group">
          <label>Ảnh thumbnail</label>
          <div class="thumbnail-item">
            <div class="link">
              <div class="image-icon">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M13.5049 16.6146H4.45953C3.38286 16.6146 2.39828 16.0692 1.83161 15.1483C1.26495 14.2275 1.21536 13.1083 1.69703 12.1379L2.91536 9.69416C3.31203 8.90082 3.94953 8.40499 4.66495 8.32707C5.38036 8.24916 6.10995 8.60332 6.66245 9.29041L6.81828 9.48874C7.12995 9.87124 7.4912 10.0767 7.84536 10.0412C8.19953 10.0129 8.52536 9.75791 8.7662 9.32582L10.1049 6.91041C10.6574 5.91166 11.3941 5.39457 12.1945 5.42999C12.9879 5.47249 13.6679 6.06749 14.1212 7.11582L16.3383 12.2937C16.7491 13.25 16.6499 14.3408 16.0762 15.2121C15.5095 16.0975 14.5462 16.6146 13.5049 16.6146ZM4.86328 9.38957C4.83495 9.38957 4.80661 9.38957 4.77828 9.39666C4.42411 9.43207 4.09828 9.71541 3.86453 10.1758L2.6462 12.6196C2.32745 13.25 2.36286 13.9937 2.7312 14.5958C3.09953 15.1979 3.7512 15.5592 4.45953 15.5592H13.4979C14.192 15.5592 14.8083 15.2262 15.1908 14.6454C15.5733 14.0646 15.637 13.3704 15.3608 12.7329L13.1437 7.55499C12.8745 6.91749 12.4991 6.52791 12.1379 6.51374C11.8049 6.49249 11.3729 6.84666 11.0329 7.44874L9.69411 9.86416C9.28328 10.6008 8.6387 11.0612 7.93745 11.125C7.2362 11.1817 6.52078 10.8417 5.98953 10.1758L5.8337 9.97749C5.5362 9.58791 5.1962 9.38957 4.86328 9.38957Z" fill="#5D6573"/>
                  <path d="M5.4375 6.69791C3.97833 6.69791 2.78125 5.50791 2.78125 4.04166C2.78125 2.57541 3.97125 1.38541 5.4375 1.38541C6.90375 1.38541 8.09375 2.57541 8.09375 4.04166C8.09375 5.50791 6.90375 6.69791 5.4375 6.69791ZM5.4375 2.44791C4.55917 2.44791 3.84375 3.16332 3.84375 4.04166C3.84375 4.91999 4.55917 5.63541 5.4375 5.63541C6.31583 5.63541 7.03125 4.91999 7.03125 4.04166C7.03125 3.16332 6.31583 2.44791 5.4375 2.44791Z" fill="#5D6573"/>
                </svg>
              </div>
              <a href="https://example.com/image.jpg">https://example.com/image.jpg</a>
            </div>
            <img class="preview-img" src="images/previewimg.jpg" />
          </div>
        </div>

        <div class="input-group">
          <label>Nội dung tóm tắt</label>
          <input
            value="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed eget sem ut elit euismod dignissim et nec lacus. Cras volutpat nibh" />
          <p class="counter">0/200 kí tự</p>
        </div>

        <div class="input-group">
          <label>Nội dung chi tiết</label>
          <input
            value="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed eget sem ut elit euismod dignissim et nec lacus. Cras volutpat nibh" />
          <p class="counter">0/2500 kí tự</p>
        </div>
      </div>
    </div>

    <div class="collapse-item collapsed">
      <div class="collapse-item-header" onclick="toggleCollapse(this)">
        <label>Nội dung thông báo - SMS</label>
        <div class="collapse-icon">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
          </svg>
        </div>
      </div>
      <div class="collapse-item-body collapsed">
      </div>
    </div>

    <div class="button-section">
      <a class="back-button" (click)="goToListTemplate()">

        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M7.17758 14.1151C7.03508 14.1151 6.89258 14.0626 6.78008 13.9501L2.22758 9.39759C2.01008 9.18009 2.01008 8.82009 2.22758 8.60259L6.78008 4.05009C6.99758 3.83259 7.35758 3.83259 7.57508 4.05009C7.79258 4.26759 7.79258 4.62759 7.57508 4.84509L3.42008 9.00009L7.57508 13.1551C7.79258 13.3726 7.79258 13.7326 7.57508 13.9501C7.47008 14.0626 7.32008 14.1151 7.17758 14.1151Z"
            fill="#6D371A" />
          <path
            d="M15.3749 9.5625H2.75244C2.44494 9.5625 2.18994 9.3075 2.18994 9C2.18994 8.6925 2.44494 8.4375 2.75244 8.4375H15.3749C15.6824 8.4375 15.9374 8.6925 15.9374 9C15.9374 9.3075 15.6824 9.5625 15.3749 9.5625Z"
            fill="#6D371A" />
        </svg>

      </a>
    </div>
  </div>
</div>

<script>
    function toggleCollapse(header) {
      const collapseItem = header.parentElement;
      const body = collapseItem.querySelector('.collapse-item-body');
      const icon = header.querySelector('.collapse-icon svg');
      const border = collapseItem.querySelector('.collapse-item');

      collapseItem.classList.toggle('collapsed');
    }

    function updateCharacterCount(input) {
      const counter = input.nextElementSibling;
      if (counter && counter.classList.contains('counter')) {
        const currentLength = input.value.length;
        const maxLength = counter.textContent.split('/')[1].split(' ')[0];
        counter.textContent = `${currentLength}/${maxLength} kí tự`;
      }
    }

    document.addEventListener('DOMContentLoaded', function () {
      const inputsWithCounter = document.querySelectorAll('.input-group input + .counter');

      inputsWithCounter.forEach(counter => {
        const input = counter.previousElementSibling;
        if (input && input.tagName === 'INPUT') {

          const maxLength = counter.textContent.split('/')[1].split(' ')[0];
          input.setAttribute('maxlength', maxLength);

          updateCharacterCount(input);


          input.addEventListener('input', function () {
            updateCharacterCount(this);
          });

          input.addEventListener('keyup', function () {
            updateCharacterCount(this);
          });

          input.addEventListener('paste', function () {

            setTimeout(() => {
              updateCharacterCount(this);
            }, 10);
          });
        }
      });
    });
  </script>
