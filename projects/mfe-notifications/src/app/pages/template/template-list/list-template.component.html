<div class="main-container">
  <div class="container-header">

    <div class="heading-left">
      <div class="wrapper">
        <h1>{{TEXTS.PAGE_TITLE}}</h1>
      </div>
    </div>
    <form [formGroup]="templateForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="d-flex flex-row gap-2 form-group">
        <div class="col-8">
          <div class="mb-3">
            <label>{{TEXTS.LABELS.TEMPLATE_NAME_ID}}</label>
            <input
              id="templateName"
              type="text"
              formControlName="TEMPLATE_NAME"
              class="form-control"
              placeholder="Placeholder"
              required
            />
          </div>
        </div>
        <div class="col-4">
          <div class="mb-3">
            <label>{{TEXTS.LABELS.TEMPLATE_TYPE}}</label>
            <select class="select-box" id="templateType" formControlName="TEMPLATE_TYPE" required>
              <option value="" disabled selected hidden>Chọn từ danh sách</option>
              <option *ngFor="let t of templatesTypes" [value]="t">{{ t }}</option>
            </select>
          </div>
        </div>
      </div>

      <div class="d-flex flex-row gap-2 form-group">
        <div class="col-4">
          <label>{{TEXTS.LABELS.CHANNEL}}</label>
          <select class="select-box" id="channel" formControlName="CHANNEL"  required>
            <option value="" disabled selected hidden>Chọn từ danh sách</option>
            <option *ngFor="let c of channels" [value]="c">{{ c }}</option>
          </select>
        </div>

        <div class="col-4">
          <label>{{TEXTS.LABELS.NOTIFICATION_TYPE}}</label>
          <select class="select-box" id="notificationType" formControlName="NOTIFICATION_TYPE" required>
            <option value="" disabled selected hidden>Chọn từ danh sách</option>
            <option *ngFor="let n of notificationTypes" [value]="n">
              {{ n }}
            </option>
          </select>
        </div>

        <div class="col-4">
          <label>{{TEXTS.LABELS.BUSINESS_TYPE}}</label>
          <select class="select-box" id="businessType" formControlName="BUSINESS_TYPE" required>
            <option value="" disabled selected hidden>Chọn từ danh sách</option>
            <option *ngFor="let b of businessTypes" [value]="b">{{ b }}</option>
          </select>
        </div>
      </div>

      <div class="button-group">
        <button class="btn btn-outline-primary" (click)="goToCreate()">{{TEXTS.CREATE_BUTTON}}</button>
        <button type="submit" class="btn btn-primary">{{TEXTS.SEARCH_BUTTON}}</button>
      </div>
    </form>
  </div>

  <div class="container-body">
    <span class="total-count">Tổng <span>{{ totalRows }}</span> dòng</span>

    <table class="custom-table">
      <thead>
      <tr>
        <th class="first-column">
          <input type="checkbox" class="form-check" />
        </th>
        <th>{{TEXTS.TABLE.ID}}</th>
        <th>{{TEXTS.TABLE.TEMPLATE_NAME}}</th>
        <th>{{TEXTS.TABLE.TEMPLATE_TYPE}}</th>
        <th>{{TEXTS.TABLE.NOTIFICATION_TYPE}}</th>
        <th>{{TEXTS.TABLE.BUSINESS_TYPE}}</th>
        <th>{{TEXTS.TABLE.CHANNEL}}</th>
        <th>{{TEXTS.TABLE.CREATED_AT}}</th>
        <th>{{TEXTS.TABLE.UPDATED_AT}}</th>
        <th>{{TEXTS.TABLE.CREATOR}}</th>
        <th class="action-column">{{TEXTS.TABLE.ACTIONS}}</th>
      </tr>
      </thead>

      <tbody>
      <tr *ngFor="let row of templates">
        <td class="first-column">
          <input type="checkbox" class="form-check" />
        </td>
        <td>{{ row.id }}</td>
        <td>{{ row.name }}</td>
        <td>{{ row.type }}</td>
        <td>{{ row.notificationType }}</td>
        <td>{{ row.businessType }}</td>
        <td>{{ row.channel }}</td>
        <td>{{ row.createdAt }}</td>
        <td>{{ row.updatedAt }}</td>
        <td>{{ row.createdBy }}</td>
        <td>
         <div class="action-column">
           <button class="btn btn-sm btn-primary btn-icon" (click)="goToDetail()">
             <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
               <path d="M7.99995 11.6867C6.40661 11.6867 5.11328 10.3933 5.11328 8.8C5.11328 7.20666 6.40661 5.91333 7.99995 5.91333C9.59328 5.91333 10.8866 7.20666 10.8866 8.8C10.8866 10.3933 9.59328 11.6867 7.99995 11.6867ZM7.99995 6.91333C6.95995 6.91333 6.11328 7.76 6.11328 8.8C6.11328 9.84 6.95995 10.6867 7.99995 10.6867C9.03995 10.6867 9.88661 9.84 9.88661 8.8C9.88661 7.76 9.03995 6.91333 7.99995 6.91333Z" fill="#6D371A"></path>
               <path d="M7.99997 14.8134C5.4933 14.8134 3.12664 13.3467 1.49997 10.8001C0.793304 9.70008 0.793304 7.90674 1.49997 6.80008C3.1333 4.25341 5.49997 2.78674 7.99997 2.78674C10.5 2.78674 12.8666 4.25341 14.4933 6.80008C15.2 7.90008 15.2 9.69341 14.4933 10.8001C12.8666 13.3467 10.5 14.8134 7.99997 14.8134ZM7.99997 3.78674C5.84664 3.78674 3.78664 5.08008 2.34664 7.34008C1.84664 8.12008 1.84664 9.48008 2.34664 10.2601C3.78664 12.5201 5.84664 13.8134 7.99997 13.8134C10.1533 13.8134 12.2133 12.5201 13.6533 10.2601C14.1533 9.48008 14.1533 8.12008 13.6533 7.34008C12.2133 5.08008 10.1533 3.78674 7.99997 3.78674Z" fill="#6D371A"></path>
             </svg>
           </button>
           <button class="btn btn-sm btn-primary btn-icon">

             <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
               <path fill-rule="evenodd" clip-rule="evenodd" d="M0.333374 3.30603C0.333374 3.02476 0.561709 2.79675 0.843374 2.79675H13.1767C13.4584 2.79675 13.6867 3.02476 13.6867 3.30603C13.6867 3.58729 13.4584 3.8153 13.1767 3.8153H0.843374C0.561709 3.8153 0.333374 3.58729 0.333374 3.30603Z" fill="#6D371A"></path>
               <path fill-rule="evenodd" clip-rule="evenodd" d="M5.99063 2.02245C5.76646 2.33335 5.68675 2.72173 5.68675 2.97309C5.68675 3.25436 5.45841 3.48237 5.17675 3.48237C4.89508 3.48237 4.66675 3.25436 4.66675 2.97309C4.66675 2.55874 4.78704 1.94855 5.16287 1.42731C5.55742 0.880099 6.21053 0.466675 7.17675 0.466675C8.14297 0.466675 8.79608 0.880099 9.19063 1.42731C9.56646 1.94855 9.68675 2.55874 9.68675 2.97309C9.68675 3.25436 9.45841 3.48237 9.17675 3.48237C8.89508 3.48237 8.66675 3.25436 8.66675 2.97309C8.66675 2.72173 8.58704 2.33335 8.36287 2.02245C8.15742 1.73751 7.81053 1.48522 7.17675 1.48522C6.54297 1.48522 6.19608 1.73751 5.99063 2.02245Z" fill="#6D371A"></path>
               <path fill-rule="evenodd" clip-rule="evenodd" d="M2.33347 12.3135L1.66809 3.34367L2.6853 3.26843L3.35336 12.2744V12.2932C3.35336 12.4891 3.41641 12.7943 3.59058 13.0358C3.74603 13.2514 4.00958 13.4482 4.51003 13.4482H9.84336C10.0395 13.4482 10.3451 13.3853 10.587 13.2114C10.8029 13.0561 11 12.7929 11 12.2932C11 11.6138 11.0841 9.51827 11.1671 7.52879C11.1816 7.18316 11.1959 6.84094 11.2099 6.50957C11.2769 4.91409 11.3334 3.56998 11.3334 3.30605H12.3534C12.3534 3.59364 12.2955 4.97119 12.2285 6.56429C12.2146 6.8933 12.2004 7.2315 12.1863 7.57119C12.1026 9.576 12.02 11.6412 12.02 12.2932C12.02 13.1249 11.6616 13.6939 11.183 14.0379C10.7305 14.3633 10.2028 14.4668 9.84336 14.4668H4.51003C3.67715 14.4668 3.10737 14.1088 2.76281 13.631C2.44308 13.1875 2.33732 12.6718 2.33347 12.3135Z" fill="#6D371A"></path>
               <path fill-rule="evenodd" clip-rule="evenodd" d="M5.84337 6.79102C6.12504 6.79102 6.35337 7.01902 6.35337 7.30029V11.6274C6.35337 11.9087 6.12504 12.1367 5.84337 12.1367C5.56171 12.1367 5.33337 11.9087 5.33337 11.6274V7.30029C5.33337 7.01902 5.56171 6.79102 5.84337 6.79102Z" fill="#6D371A"></path>
               <path fill-rule="evenodd" clip-rule="evenodd" d="M8.51 6.79102C8.79167 6.79102 9.02 7.01902 9.02 7.30029V11.6274C9.02 11.9087 8.79167 12.1367 8.51 12.1367C8.22833 12.1367 8 11.9087 8 11.6274V7.30029C8 7.01902 8.22833 6.79102 8.51 6.79102Z" fill="#6D371A"></path>
             </svg>
           </button>
         </div>
        </td>
      </tr>
      </tbody>
    </table>

    <!-- pagination -->
    <div class="pagination">
      <div class="page-select">
        <button
          class="page-btn"
          [disabled]="currentPage === 1"
          (click)="onChangePage(currentPage - 1)"
        >
          «
        </button>

        <button
          *ngFor="let p of visiblePages"
          class="page-btn"
          [class.active]="p === currentPage"
          (click)="onChangePage(p)"
        >
          {{ p }}
        </button>

        <button
          class="page-btn"
          [disabled]="currentPage === totalPages"
          (click)="onChangePage(currentPage + 1)"
        >
          »
        </button>
      </div>

      <div class="rows-per-page">
        <select
          class="select-box"
          [value]="pageSize"
          (change)="onChangePageSize($event)"
        >
          <option *ngFor="let size of [10,25,50,100]" [value]="size">
            {{ size }} dòng / trang
          </option>
        </select>
      </div>
    </div>
  </div>
</div>
